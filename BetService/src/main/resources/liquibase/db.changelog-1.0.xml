<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet id="0.0.1" author="albert.gafarov">
        <sqlFile path="liquibase/schema.sql"/>
    </changeSet>

    <changeSet id="1.0.0" author="albert.gafarov">
        <createTable tableName="users">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="username" type="varchar(128)">
                <constraints nullable="false"/>
            </column>
            <column name="chat_id" type="integer">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="code" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="chat_status" type="varchar(128)">
                <constraints nullable="false"/>
            </column>
            <column name="draft_bet_id" type="integer">
                <constraints nullable="true"/>
            </column>
            <column name="created" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="varchar(25)" defaultValue="ACTIVE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1.0.1" author="albert.gafarov">
        <addUniqueConstraint tableName="users" columnNames="username, code"
                             constraintName="pk_user"/>
    </changeSet>
    <changeSet id="1.0.2" author="albert.gafarov">
        <createTable tableName="draft_bets">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="opponent_name" type="varchar(128)">
                <constraints nullable="true"/>
            </column>
            <column name="opponent_code" type="integer">
                <constraints nullable="true"/>
            </column>
            <column name="definition" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="wager" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="finish_date" type="timestamp">
                <constraints nullable="true"/>
            </column>
            <column name="created" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="true"/>
            </column>
            <column name="status" type="varchar(25)" defaultValue="DRAFT">
                <constraints nullable="false"/>
            </column>
        </createTable>

    </changeSet>
    <changeSet id="1.0.3" author="albert.gafarov">
        <addForeignKeyConstraint baseTableName="users"
                                 baseColumnNames="draft_bet_id"
                                 constraintName="fk_users_draft_bets"
                                 referencedTableName="draft_bets"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1.0.10" author="albert.gafarov">
        <createTable tableName="bets">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="initiator_id" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="opponent_id" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="definition" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="wager" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="finish_date" type="timestamp">
                <constraints nullable="true"/>
            </column>
            <column name="created" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="true"/>
            </column>
            <column name="initiator_bet_status" type="varchar(25)" defaultValue="NOT_READ">
                <constraints nullable="false"/>
            </column>
            <column name="opponent_bet_status" type="varchar(25)" defaultValue="NOT_READ">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="varchar(25)" defaultValue="NOT_READ">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="1.0.14" author="albert.gafarov">
        <addForeignKeyConstraint baseTableName="bets"
                                 baseColumnNames="initiator_id"
                                 constraintName="fk_bets_initiator"
                                 referencedTableName="users"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1.0.15" author="albert.gafarov">
        <addForeignKeyConstraint baseTableName="bets"
                                 baseColumnNames="opponent_id"
                                 constraintName="fk_bets_opponent"
                                 referencedTableName="users"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1.0.16" author="albert.gafarov">
        <createTable tableName="status">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="current_bet_status" type="varchar(25)">
                <constraints nullable="false"/>
            </column>
            <column name="new_bet_status" type="varchar(25)">
            </column>
            <column name="new_rival_bet_status" type="varchar(25)">
            </column>
            <column name="valid" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="bet_role" type="varchar(9)">
                <constraints nullable="false"/>
            </column>
            <column name="message_for_opponent" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="message_for_initiator" type="text">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1.0.17" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="OFFERED"/>
            <column name="new_bet_status" value="CANCELED"/>
            <column name="new_rival_bet_status" value="CANCELED"/>
            <column name="message_for_initiator" value="–°–ø–æ—Ä –æ—Ç–∫–ª–æ–Ω–µ–Ω!"/>
            <column name="message_for_opponent" value="–°–ø–æ—Ä –æ—Ç–∫–ª–æ–Ω–µ–Ω!"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.18" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="OFFERED"/>
            <column name="new_bet_status" value="ACCEPTED"/>
            <column name="new_rival_bet_status" value="ACCEPTED"/>
            <column name="message_for_initiator" value="–í—ã–∑–æ–≤ –ø—Ä–∏–Ω—è—Ç!"/>
            <column name="message_for_opponent" value="–í—ã–∑–æ–≤ –ø—Ä–∏–Ω—è—Ç!"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.19" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="WIN"/>
            <column name="message_for_initiator" value="–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏?"/>
            <column name="message_for_opponent" value="–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –í—ã –ø–æ–±–µ–¥–∏–ª–∏, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.20" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="LOSE"/>
            <column name="message_for_initiator" value="–í—ã –ø–æ–±–µ–¥–∏–ª–∏?"/>
            <column name="message_for_opponent" value="–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏!"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.21" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="STANDOFF"/>
            <column name="message_for_initiator" value="–ù–∏—á—å—è!"/>
            <column name="message_for_opponent" value="–ù–∏—á—å—è!"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.22" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="WAGERRECIEVED"/>
            <column name="message_for_initiator" value="–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–∏–≥—Ä—ã—à–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ"/>
            <column name="message_for_opponent" value="–í—ã–∏–≥—Ä—ã—à –ø–æ–ª—É—á–µ–Ω!"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.23" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="LOSE"/>
            <column name="new_bet_status" value="WAGERPAID"/>
            <column name="message_for_initiator" value="–í–∞—à –≤—ã–∏–≥—Ä—ã—à –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ"/>
            <column name="message_for_opponent" value="–í—ã–∏–≥—Ä—ã—à –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.26" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="OFFERED"/>
            <column name="new_bet_status" value="CANCELED"/>
            <column name="message_for_initiator" value="–°–ø–æ—Ä –æ—Ç–∫–ª–æ–Ω–µ–Ω!"/>
            <column name="message_for_opponent" value="–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä –ø–µ—Ä–µ–¥—É–º–∞–ª"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.27" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="OFFERED"/>
            <column name="new_bet_status" value="ACCEPTED"/>
            <column name="message_for_initiator" value="–°–ø–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –ï–≥–æ –Ω–µ–ª—å–∑—è –æ—Ç–∫–ª–æ–Ω–∏—Ç—å"/>
            <column name="valid" value="false"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.28" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="WIN"/>
            <column name="message_for_initiator" value="–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –í—ã –ø–æ–±–µ–¥–∏–ª–∏, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–ø–ø–æ–Ω–µ–Ω—Ç—É"/>
            <column name="message_for_opponent" value="–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏?"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.29" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="LOSE"/>
            <column name="message_for_initiator" value="–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏!"/>
            <column name="message_for_opponent" value="–í—ã –ø–æ–±–µ–¥–∏–ª–∏?"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.30" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="STANDOFF"/>
            <column name="message_for_initiator" value="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∏—á—å–µ–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–ø–ø–æ–Ω–µ–Ω—Ç—É"/>
            <column name="message_for_opponent" value="–ù–∏—á—å—è?"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.31" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="WAGERRECIEVED"/>
            <column name="message_for_opponent" value="–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–∏–≥—Ä—ã—à–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ"/>
            <column name="message_for_initiator" value="–í—ã–∏–≥—Ä—ã—à –ø–æ–ª—É—á–µ–Ω!"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.32" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="LOSE"/>
            <column name="new_bet_status" value="WAGERPAID"/>
            <column name="message_for_opponent" value="–í–∞—à –≤—ã–∏–≥—Ä—ã—à –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ"/>
            <column name="message_for_initiator" value="–í—ã–∏–≥—Ä—ã—à –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!"/>
            <column name="valid" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.35" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="ACCEPTED"/>
            <column name="valid" value="false"/>
            <column name="message_for_opponent" value="–í—ã —É–∂–µ –ø—Ä–∏–Ω—è–ª–∏ –°–ø–æ—Ä —Ä–∞–Ω–µ–µ"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.36" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="ACCEPTED"/>
            <column name="valid" value="false"/>
            <column name="message_for_initiator" value="–°–ø–æ—Ä –ø—Ä–∏–Ω—è—Ç –æ–ø–ø–æ–Ω–µ–Ω—Ç–æ–º —Ä–∞–Ω–µ–µ"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.37" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="CANCELED"/>
            <column name="new_bet_status" value="ACCEPTED"/>
            <column name="valid" value="false"/>
            <column name="message_for_opponent" value="–°–ø–æ—Ä –æ—Ç–∫–ª–æ–Ω–µ–Ω —Ä–∞–Ω–µ–µ"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.38" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="CANCELED"/>
            <column name="new_bet_status" value="ACCEPTED"/>
            <column name="valid" value="false"/>
            <column name="message_for_initiator" value="–°–ø–æ—Ä –æ—Ç–∫–ª–æ–Ω–µ–Ω –æ–ø–ø–æ–Ω–µ–Ω—Ç–æ–º"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.39" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="CANCELED"/>
            <column name="valid" value="false"/>
            <column name="message_for_opponent" value="–°–ø–æ—Ä –±—ã–ª –ø—Ä–∏–Ω—è—Ç. –ï–≥–æ –Ω–µ–ª—å–∑—è –æ—Ç–∫–ª–æ–Ω–∏—Ç—å"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.40" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="ACCEPTED"/>
            <column name="new_bet_status" value="CANCELED"/>
            <column name="valid" value="false"/>
            <column name="message_for_initiator" value="–°–ø–æ—Ä –±—ã–ª –ø—Ä–∏–Ω—è—Ç. –ï–≥–æ –Ω–µ–ª—å–∑—è –æ—Ç–∫–ª–æ–Ω–∏—Ç—å"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.41" author="albert.gafarov">
        <addUniqueConstraint tableName="status" columnNames="bet_role,current_bet_status,new_bet_status"/>
    </changeSet>
    <changeSet id="1.0.42" author="albert.gafarov">
        <update tableName="status">
            <column name="new_rival_bet_status" value="CANCELED"/>
            <where>
                current_bet_status ='OFFERED' AND new_bet_status = 'CANCELED' AND bet_role = 'INITIATOR'
            </where>
        </update>
    </changeSet>
    <changeSet id="1.0.43" author="albert.gafarov">
        <createTable tableName="notify_expired_status">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="bet_id" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="notify_status" type="varchar(25)">
            </column>
            <column name="created" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="varchar(25)" defaultValue="ACTIVE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1.0.44" author="albert.gafarov">
        <addUniqueConstraint tableName="notify_expired_status" columnNames="bet_id"/>
    </changeSet>
    <changeSet id="1.0.46" author="albert.gafarov">
        <dropColumn tableName="users" columnName="draft_bet_id"/>
    </changeSet>
    <changeSet id="1.0.45" author="albert.gafarov">
        <comment>–û—á–∏—â–∞–µ–º —Ç–∞–±–ª–∏—Ü—É —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤</comment>
        <sql splitStatements="true">
            TRUNCATE TABLE draft_bets;
        </sql>
    </changeSet>
    <changeSet id="1.0.47" author="albert.gafarov">
        <addColumn tableName="draft_bets">
            <column name="initiator_id" type="integer">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="1.0.48" author="albert.gafarov">
        <createTable tableName="bot_message">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="tg_message_id" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="message_type" type="varchar(25)">
            </column>
            <column name="created" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="varchar(25)" defaultValue="ACTIVE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1.0.49" author="albert.gafarov">
        <addNotNullConstraint tableName="draft_bets" columnName="updated"/>
    </changeSet>
    <changeSet id="1.0.50" author="albert.gafarov">
        <addColumn tableName="bot_message">
            <column name="draft_bet_id" type="integer">
                <constraints foreignKeyName="fk_botMessage_draft_bet" nullable="true"
                             referencedTableName="draft_bets" referencedColumnNames="id"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="1.0.51" author="albert.gafarov">
        <createIndex tableName="bot_message" indexName="index_bot_message_draft_bet_id">
            <column name="draft_bet_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.52" author="albert.gafarov">
        <createIndex tableName="bot_message" indexName="index_bot_message_user_id">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.53" author="albert.gafarov">
        <createIndex tableName="bets" indexName="index_bets_initiator_id">
            <column name="initiator_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.54" author="albert.gafarov">
        <createIndex tableName="bets" indexName="index_bets_opponent_id">
            <column name="opponent_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.55" author="albert.gafarov">
        <createIndex tableName="bets" indexName="index_bets_id" unique="true">
            <column name="id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.56" author="albert.gafarov">
        <createIndex tableName="bets" indexName="index_bets_finish_date">
            <column name="finish_date"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.57" author="albert.gafarov">
        <createIndex tableName="notify_expired_status" indexName="index_notify_expired_status_bet_id" unique="true">
            <column name="bet_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.58" author="albert.gafarov">
        <createIndex tableName="users" indexName="index_users_id" unique="true">
            <column name="id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.59" author="albert.gafarov">
        <createIndex tableName="users" indexName="index_users_chat_id" unique="true">
            <column name="chat_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.60" author="albert.gafarov">
        <comment>–°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å –ø–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—é</comment>
        <sql splitStatements="true">
            CREATE INDEX index_users_username ON users (upper(username), code);
        </sql>
    </changeSet>
    <changeSet id="1.0.61" author="albert.gafarov">
        <createIndex tableName="draft_bets" indexName="index_draft_bets_id" unique="true">
            <column name="id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.62" author="albert.gafarov">
        <createIndex tableName="draft_bets" indexName="index_draft_bets_initiator_id">
            <column name="initiator_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.63" author="albert.gafarov">
        <createIndex tableName="draft_bets" indexName="index_draft_bets_updated" unique="true">
            <column name="updated"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.64" author="albert.gafarov">
        <createTable tableName="bet_final_status_rule">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="initiator_status" type="varchar(25)">
                <constraints nullable="false"/>
            </column>
            <column name="opponent_status" type="varchar(25)">
                <constraints nullable="false"/>
            </column>
            <column name="bet_final_status" type="varchar(25)">
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1.0.65" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="WIN"/>
            <column name="opponent_status" value="LOSE"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.66" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="WIN"/>
            <column name="opponent_status" value="WIN"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.67" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="WIN"/>
            <column name="opponent_status" value="STANDOFF"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.68" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="LOSE"/>
            <column name="opponent_status" value="LOSE"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.69" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="LOSE"/>
            <column name="opponent_status" value="WIN"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.70" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="LOSE"/>
            <column name="opponent_status" value="STANDOFF"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.71" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="STANDOFF"/>
            <column name="opponent_status" value="LOSE"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.72" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="STANDOFF"/>
            <column name="opponent_status" value="WIN"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.73" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="STANDOFF"/>
            <column name="opponent_status" value="STANDOFF"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.74" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="WAGERRECIEVED"/>
            <column name="opponent_status" value="WAGERPAID"/>
            <column name="bet_final_status" value="CLOSED"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.75" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="WAGERPAID"/>
            <column name="opponent_status" value="WAGERRECIEVED"/>
            <column name="bet_final_status" value="CLOSED"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.76" author="albert.gafarov">
        <insert tableName="bet_final_status_rule">
            <column name="initiator_status" value="WAGERPAID"/>
            <column name="opponent_status" value="WIN"/>
            <column name="bet_final_status" value="NOT_ACTIVE"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.77" author="albert.gafarov">
        <addUniqueConstraint tableName="bet_final_status_rule" columnNames="initiator_status,opponent_status"/>
    </changeSet>
    <changeSet id="1.0.78" author="albert.gafarov">
        <createTable tableName="subscribe">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="subscriber_id" type="integer">
                <constraints foreignKeyName="fk_subscriber_user_id"
                             referencedTableName="users"
                             referencedColumnNames="id"
                             nullable="false"/>
            </column>
            <column name="subscribed_id" type="integer">
                <constraints foreignKeyName="fk_subscribed_user_id"
                             referencedTableName="users"
                             referencedColumnNames="id"
                             nullable="false"/>
            </column>
            <column name="created" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="varchar(25)" defaultValue="ACTIVE">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addUniqueConstraint tableName="subscribe" columnNames="subscriber_id,subscribed_id"/>
        <createIndex tableName="subscribe" indexName="subscribe_idx" unique="true">
            <column name="subscriber_id"/>
            <column name="subscribed_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.79" author="albert.gafarov">
        <dropPrimaryKey tableName="subscribe" constraintName="subscribe_pkey"/>
        <dropColumn tableName="subscribe" columnName="id"/>
        <addPrimaryKey tableName="subscribe" columnNames="subscriber_id,subscribed_id"/>
    </changeSet>
    <changeSet id="1.0.80" author="albert.gafarov">
        <addColumn tableName="draft_bets">
            <column name="inverse_definition" type="boolean" defaultValue="false">
                <constraints nullable="false"/>
            </column>
        </addColumn>
        <addColumn tableName="bets">
            <column name="inverse_definition" type="boolean" defaultValue="false">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="1.0.81" author="albert.gafarov">
        <dropNotNullConstraint tableName="bets" columnName="wager"/>
    </changeSet>
    <changeSet id="1.0.82" author="albert.gafarov">
        <createTable tableName="info">
            <column name="type" type="varchar(128)">
                <constraints primaryKey="true" unique="true" nullable="false"/>
            </column>
            <column name="text" type="clob"/>
            <column name="created" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="varchar(25)" defaultValue="ACTIVE">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <sql>insert into info (type, text) values ('MENU', '&lt;b>–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –º–µ–Ω—é –¥–ª—è –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è:&lt;/b>')</sql>
        <sql>insert into info (type, text) values ('ABOUT_BOT', E'&lt;b>–û –±–æ—Ç–µ:&lt;/b>
            –≠—Ç–æ—Ç –±–æ—Ç –∑–∞–ø–æ–º–Ω–∏—Ç –í–∞—à —Å–ø–æ—Ä —Å –æ–ø–ø–æ–Ω–µ–Ω—Ç–æ–º –∏ –Ω–∞–ø–æ–º–Ω–∏—Ç –æ –Ω–µ–º, –∫–æ–≥–¥–∞ –ø—Ä–∏–¥–µ—Ç –≤—Ä–µ–º—è.
            –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–ø–æ—Ä –æ–ø–ø–æ–Ω–µ–Ω—Ç—É, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –í—ã –∑–Ω–∞–µ—Ç–µ –µ–≥–æ username –∏ –∫–æ–¥ –∏–ª–∏ –æ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ –í–∞—à–∏ –¥—Ä—É–∑—å—è.
            –ù–µ–∑–Ω–∞–∫–æ–º—ã–π —á–µ–ª–æ–≤–µ–∫ –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –í–∞–º —Å–ø–æ—Ä, –µ—Å–ª–∏ –æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç –í–∞—à–∏ username –∏ –∫–æ–¥.
            –í—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—é —Ç–æ–º—É, –∫—Ç–æ –æ–∫–∞–∂–µ—Ç—Å—è –ø—Ä–∞–≤ –≤ —Å–ø–æ—Ä–µ, –Ω–æ –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤–∞—à–∏ —Ä–∞—Å—á–µ—Ç—ã.
            –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—É–¥—å–µ–π. –†–µ—à–µ–Ω–∏–µ –æ —Ç–æ–º, –∫—Ç–æ –ø—Ä–∞–≤ –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —Å–∞–º–∏. –í—ã —Å–º–æ–∂–µ—Ç–µ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–≥–¥–∞ –Ω–∞—Å—Ç—É–ø–∏—Ç
            –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è')
        </sql>
        <sql>insert into info (type, text) values ('HOW_ADD_FRIEND', E'&lt;b>–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞:&lt;/b>
            –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞, –Ω—É–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –∫–æ–º–∞–Ω–¥–æ–π /reference, –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Å–ª–∞—Ç—å –µ–µ –¥—Ä—É–≥—É –≤ –ª–∏—á–Ω–æ–º
            —Å–æ–æ–±—â–µ–Ω–∏–∏. –î—Ä—É–≥ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—Å–ª–∞—Ç—å —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –±–æ—Ç –∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –≤—ã —Å—Ç–∞–ª–∏
            –¥—Ä—É–∑—å—è–º–∏.
            –¢–∞–∫–∂–µ, –∫–æ–≥–¥–∞ –æ–ø–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–æ—Ä, –æ–ø–ø–æ–Ω–µ–Ω—Ç –∏ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥—Ä—É–∑—å—è–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
            –ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –¥—Ä—É–≥–∞ –≤—ã–∑–æ–≤–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /friends –∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ üóë —Å–ø—Ä–∞–≤–∞ –æ—Ç –µ–≥–æ –∏–º–µ–Ω–∏')
        </sql>
        <sql>insert into info (type, text) values ('HOW_CREATE_BET', '&lt;b>–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–ø–æ—Ä:&lt;/b>
            –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å–ø–æ—Ä, –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /create –∏ —Å–ª–µ–¥—É–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º')
        </sql>
        <sql>insert into info (type, text) values ('ABOUT_PERSONAL_DATA', E'&lt;b>–û –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:&lt;/b>
            –ë–æ—Ç –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–∞–∫–∏–µ –∫–∞–∫ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.
            –î–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è chat id telegramm –∏ nickname –∏–ª–∏ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∏–º—è_—Ñ–∞–º–∏–ª–∏—è.
            –ë–æ—Ç —Ö—Ä–∞–Ω–∏—Ç –≤–∞—à–∏ —Å–ø–æ—Ä—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ –≤–Ω–æ—Å–∏—Ç–µ —Ç—É–¥–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ–º–µ—Ä–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç –∏ –ø—Ä–æ—á—É—é
            —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
            –ü—Ä–æ–¥–æ–ª–∂–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞, –í—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å —ç—Ç–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏')
        </sql>
    </changeSet>
    <changeSet id="1.0.83" author="albert.gafarov">
        <addColumn tableName="bot_message">
            <column name="friend_id" type="integer">
                <constraints foreignKeyName="fk_friend_id_users" referencedTableName="users" referencedColumnNames="id"
                             nullable="true"/>
            </column>
            <column name="bet_id" type="integer">
                <constraints foreignKeyName="fk_bet_id_bets" referencedTableName="bets" referencedColumnNames="id"
                             nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="1.0.84" author="albert.gafarov">
        <addColumn tableName="bets">
            <column name="bet_status" type="varchar(25)"/>
        </addColumn>
        <createTable tableName="bet_status_rule">
            <column name="initiator_status" type="varchar(25)">
                <constraints nullable="false"/>
            </column>
            <column name="opponent_status" type="varchar(25)">
                <constraints nullable="false"/>
            </column>
            <column name="bet_status" type="varchar(25)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addUniqueConstraint tableName="bet_status_rule" columnNames="initiator_status,opponent_status"/>
    </changeSet>

    <changeSet id="1.0.85" author="albert.gafarov">
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="WIN"/>
            <column name="opponent_status" value="LOSE"/>
            <column name="bet_status" value="WAIT_WAGER_PAY"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="WIN"/>
            <column name="opponent_status" value="WIN"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="WIN"/>
            <column name="opponent_status" value="STANDOFF"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="LOSE"/>
            <column name="opponent_status" value="LOSE"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="LOSE"/>
            <column name="opponent_status" value="WIN"/>
            <column name="bet_status" value="WAIT_WAGER_PAY"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="LOSE"/>
            <column name="opponent_status" value="STANDOFF"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="STANDOFF"/>
            <column name="opponent_status" value="LOSE"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="STANDOFF"/>
            <column name="opponent_status" value="WIN"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="STANDOFF"/>
            <column name="opponent_status" value="STANDOFF"/>
            <column name="bet_status" value="CLOSED"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="WAGERRECIEVED"/>
            <column name="opponent_status" value="WAGERPAID"/>
            <column name="bet_status" value="CLOSED"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="WAGERPAID"/>
            <column name="opponent_status" value="WAGERRECIEVED"/>
            <column name="bet_status" value="CLOSED"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="WAGERPAID"/>
            <column name="opponent_status" value="WIN"/>
            <column name="bet_status" value="WAIT_WAGER_PAY"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="OFFERED"/>
            <column name="opponent_status" value="OFFERED"/>
            <column name="bet_status" value="OFFER"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="ACCEPTED"/>
            <column name="opponent_status" value="ACCEPTED"/>
            <column name="bet_status" value="ACTIVE"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="CANCELED"/>
            <column name="opponent_status" value="CANCELED"/>
            <column name="bet_status" value="CANCEL"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.86" author="albert.gafarov">
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="WAGERRECIEVED"/>
            <column name="opponent_status" value="STANDOFF"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="ACCEPTED"/>
            <column name="opponent_status" value="LOSE"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="WAGERPAID"/>
            <column name="opponent_status" value="WAGERPAID"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
        <insert tableName="bet_status_rule">
            <column name="initiator_status" value="STANDOFF"/>
            <column name="opponent_status" value="WAGERPAID"/>
            <column name="bet_status" value="DISAGREEMENT"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.87" author="albert.gafarov">
        <sql>
            update betbot.bets set bet_status = r.bet_status
            from betbot.bet_status_rule r
            WHERE betbot.bets.opponent_bet_status = r.opponent_status AND betbot.bets.initiator_bet_status =
            r.initiator_status;
        </sql>
    </changeSet>
    <changeSet id="1.0.88" author="albert.gafarov">
        <addColumn tableName="status">
            <column name="current_rival_bet_status" type="varchar(25)"/>
        </addColumn>
        <sql>
            update betbot.status set message_for_opponent = '–í—ã –ø–æ–±–µ–¥–∏–ª–∏!',
            new_rival_bet_status = 'WIN'
            where current_bet_status = 'ACCEPTED' and new_bet_status = 'LOSE';
        </sql>
        <sql>update betbot.status set new_rival_bet_status = 'WAGERPAID', current_rival_bet_status = 'LOSE'
            where current_bet_status = 'WIN' and new_bet_status = 'WAGERRECIEVED';
        </sql>
    </changeSet>
    <changeSet id="1.0.89" author="albert.gafarov">
        <dropUniqueConstraint tableName="status"
                              constraintName="status_bet_role_current_bet_status_new_bet_status_key"/>
        <addUniqueConstraint tableName="status"
                             columnNames="bet_role,current_bet_status,new_bet_status,current_rival_bet_status"/>
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="LOSE"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="WIN"/>
            <column name="message_for_opponent" value="–í—ã –ø—Ä–∏–∑–Ω–∞–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ"/>
            <column name="message_for_initiator" value="–û–ø–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–∑–Ω–∞–ª –ø–æ—Ä–∞–∂–µ–Ω–∏–µ. –í—ã –ø–æ–±–µ–¥–∏–ª–∏!"/>
        </insert>
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="LOSE"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="WIN"/>
            <column name="message_for_opponent" value="–í—ã –ø—Ä–∏–∑–Ω–∞–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ"/>
            <column name="message_for_initiator" value="–û–ø–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–∑–Ω–∞–ª –ø–æ—Ä–∞–∂–µ–Ω–∏–µ. –í—ã –ø–æ–±–µ–¥–∏–ª–∏!"/>
        </insert>
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="STANDOFF"/>
            <column name="new_bet_status" value="LOSE"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="WIN"/>
            <column name="message_for_opponent" value="–í—ã –ø—Ä–∏–∑–Ω–∞–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ"/>
            <column name="message_for_initiator" value="–û–ø–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–∑–Ω–∞–ª –ø–æ—Ä–∞–∂–µ–Ω–∏–µ. –í—ã –ø–æ–±–µ–¥–∏–ª–∏!"/>
        </insert>
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="STANDOFF"/>
            <column name="new_bet_status" value="LOSE"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="WIN"/>
            <column name="message_for_opponent" value="–í—ã –ø—Ä–∏–∑–Ω–∞–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ"/>
            <column name="message_for_initiator" value="–û–ø–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–∑–Ω–∞–ª –ø–æ—Ä–∞–∂–µ–Ω–∏–µ. –í—ã –ø–æ–±–µ–¥–∏–ª–∏!"/>
        </insert>
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="STANDOFF"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="WIN"/>
            <column name="message_for_opponent" value="–í—ã —Å–æ–≥–ª–∞—Å–Ω—ã –Ω–∞ –Ω–∏—á—å—é"/>
            <column name="message_for_initiator" value="–û–ø–ø–æ–Ω–µ–Ω—Ç —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –Ω–∏—á—å—é"/>
        </insert>
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="STANDOFF"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="WIN"/>
            <column name="message_for_opponent" value="–í—ã —Å–æ–≥–ª–∞—Å–Ω—ã –Ω–∞ –Ω–∏—á—å—é"/>
            <column name="message_for_initiator" value="–û–ø–ø–æ–Ω–µ–Ω—Ç —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –Ω–∏—á—å—é"/>
        </insert>
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="STANDOFF"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="STANDOFF"/>
            <column name="message_for_opponent" value="–í—ã —Å–æ–≥–ª–∞—Å–Ω—ã –Ω–∞ –Ω–∏—á—å—é"/>
            <column name="message_for_initiator" value="–û–ø–ø–æ–Ω–µ–Ω—Ç —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –Ω–∏—á—å—é"/>
        </insert>
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="STANDOFF"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="STANDOFF"/>
            <column name="message_for_opponent" value="–í—ã —Å–æ–≥–ª–∞—Å–Ω—ã –Ω–∞ –Ω–∏—á—å—é"/>
            <column name="message_for_initiator" value="–û–ø–ø–æ–Ω–µ–Ω—Ç —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –Ω–∏—á—å—é"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.90" author="albert.gafarov">
        <insert tableName="status">
            <column name="bet_role" value="INITIATOR"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="WAGERRECIEVED"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="WAGERPAID"/>
            <column name="message_for_opponent" value="–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–∏–≥—Ä—ã—à–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ"/>
            <column name="message_for_initiator" value="–í—ã–∏–≥—Ä—ã—à –ø–æ–ª—É—á–µ–Ω!"/>
        </insert>
        <insert tableName="status">
            <column name="bet_role" value="OPPONENT"/>
            <column name="current_bet_status" value="WIN"/>
            <column name="new_bet_status" value="WAGERRECIEVED"/>
            <column name="valid" value="true"/>
            <column name="current_rival_bet_status" value="WAGERPAID"/>
            <column name="message_for_opponent" value="–í—ã–∏–≥—Ä—ã—à –ø–æ–ª—É—á–µ–Ω!"/>
            <column name="message_for_initiator" value="–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–∏–≥—Ä—ã—à–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ"/>
        </insert>
    </changeSet>
    <changeSet id="1.0.91" author="albert.gafarov">
        <sql>update betbot.status set message_for_opponent = '–û–ø–ø–æ–Ω–µ–Ω—Ç —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –Ω–∏—á—å—é', message_for_initiator = '–í—ã
            —Å–æ–≥–ª–∞—Å–Ω—ã –Ω–∞ –Ω–∏—á—å—é'
            where bet_role = 'INITIATOR' and current_bet_status = 'WIN' and new_bet_status = 'STANDOFF'
        </sql>
    </changeSet>
    <changeSet id="1.0.92" author="albert.gafarov">
        <createTable tableName="argument">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="bet_id" type="integer">
                <constraints foreignKeyName="argument_bets_fk" referencedTableName="bets" referencedColumnNames="id"
                             nullable="false"/>
            </column>
            <column name="bet_role" type="varchar(128)">
                <constraints nullable="false"/>
            </column>
            <column name="text" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="created" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="varchar(25)" defaultValue="ACTIVE">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <createIndex tableName="argument" indexName="index_argument_bet_id">
            <column name="bet_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1.0.93" author="albert.gafarov">
        <createTable tableName="dialog_status">
            <column name="id" type="serial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="user_id" type="integer">
                <constraints foreignKeyName="dialog_status_users_fk" referencedTableName="users"
                             referencedColumnNames="id" nullable="false" unique="true"/>
            </column>
            <column name="chat_status" type="varchar(128)">
                <constraints nullable="false"/>
            </column>
            <column name="bet_id" type="integer">
                <constraints foreignKeyName="dialog_status_bets_fk" referencedTableName="bets"
                             referencedColumnNames="id"/>
            </column>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1.0.94" author="albert.gafarov">
        <dropColumn tableName="users" columnName="chat_status"/>
    </changeSet>
    <changeSet id="1.0.95" author="albert.gafarov">
        <createTable tableName="message_with_key">
            <column name="user_id" type="integer">
                <constraints primaryKey="true"
                             nullable="false"
                             unique="true"
                             foreignKeyName="message_with_key_user_fk"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="tg_message_id" type="integer"/>
            <column name="updated" type="timestamp" defaultValueDate="current_timestamp">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1.0.96" author="albert.gafarov">
        <addColumn tableName="subscribe">
            <column name="secret_key" type="varchar(256)"/>
        </addColumn>
    </changeSet>
    <changeSet id="1.0.97" author="albert.gafarov">
        <addColumn tableName="argument">
            <column name="encrypted" type="boolean" defaultValue="false"/>
        </addColumn>
    </changeSet>
    <changeSet id="1.0.98" author="albert.gafarov">
        <sql>insert into info (type, text) values ('MENU_SECRET', '&lt;b>–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ&lt;/b>')</sql>
    </changeSet>
    <changeSet id="1.0.99" author="albert.gafarov">
        <addColumn tableName="users">
            <column name="encryption_enabled" type="boolean" defaultValue="false"/>
        </addColumn>
    </changeSet>
    <changeSet id="1.0.100" author="albert.gafarov">
        <addColumn tableName="bets">
            <column name="encrypted" type="boolean" defaultValue="false"/>
        </addColumn>
        <update tableName="bets">
            <column name="encrypted" value="false"/>
        </update>
    </changeSet>
</databaseChangeLog>